ScreenManager:
    Login_Page:
    Signup_Page:
    OTP_Page:
    Home:
    Balance:
    Withdraw:
    Deposit:
    Transfer:
    OTP_Login:
    OTP_Signup:
    OTP_Transfer:
    OTP_Withdraw:
    OTP_Deposit:
    Transaction_Success:


<Login_Page>:

    name:'login_page'

    MDToolbar:
        pos_hint:{'center_x':0.5,'center_y':0.95}
        title:'LOGIN'
        elevation:8

    MDTextField:
        id:login_username
        helper_text:"Enter Account Number"
        helper_text_mode: "persistent"
        required:True
        pos_hint:{'center_x':0.5,'center_y':0.65}
        icon_right: 'key-variant'
        size_hint_x:None
        width:270

    MDTextField:
        id:login_password
        helper_text:'Password'
        helper_text_mode: "persistent"
        required:True
        password: True
        pos_hint:{'center_x':0.5,'center_y':0.55}
        size_hint_x:None
        width:270

    MDIconButton:
        icon: "eye-off"
        ripple_scale: .5
        pos_hint: {"center_y": .55, "center_x":0.65}
        on_release:
            self.icon = "eye" if self.icon == "eye-off" else "eye-off"
            login_password.password = False if login_password.password is True else True

    MDRectangleFlatButton:
        text:'Login'
        pos_hint:{'center_x':0.5,'center_y':0.45}
        on_release:
            root.manager.current="otp_login"
            app.log(login_username.text)
            #check=app.credential_check(login_username.text,login_password.text)
            #root.manager.current="home" if check == True else "login_page"


    MDRectangleFlatButton:
        text:'Create Account'
        pos_hint:{'center_x':0.5,'center_y':0.35}
        on_press:
            root.manager.current="signup_page"
<Signup_Page>:
    name:'signup_page'

    MDToolbar:
        pos_hint:{'center_x':0.5,'center_y':0.95}
        title:'SIGNUP'
        elevation:8

    MDTextField:
        id: firstname
        helper_text:'First Name'
        helper_text_mode: "persistent"
        pos_hint:{'center_x':0.5,'center_y':0.85}
        required:True
        size_hint_x:None
        width:270


    MDTextField:
        id:lastname
        helper_text:'Last Name'
        helper_text_mode: "persistent"
        pos_hint:{'center_x':0.5,'center_y':0.75}
        required:True
        size_hint_x:None
        width:270

    MDTextField:
        id:password
        helper_text:'Set Password'
        helper_text_mode: "persistent"
        pos_hint:{'center_x':0.5,'center_y':0.65}
        size_hint_x:None
        width:270
        required:True

    MDIconButton:
        icon: "eye-off"
        ripple_scale: .5
        pos_hint: {"center_y": .6, "center_x":0.65}
        on_release:
            self.icon = "eye" if self.icon == "eye-off" else "eye-off"
            password.password = False if password.password is True else True

    MDTextField:
        id:phonenumber
        helper_text:'Phone Number'
        helper_text_mode: "persistent"
        pos_hint:{'center_x':0.5,'center_y':0.55}
        size_hint_x:None
        width:270
        required:True

    MDTextField:
        id:aadharnumber
        helper_text:'Aadhar Number (12 digits)'
        helper_text_mode: "persistent"
        pos_hint:{'center_x':0.5,'center_y':0.45}
        size_hint_x:None
        width:270
        required:True

    MDTextField:
        id:email
        helper_text:'E-Mail'
        helper_text_mode: "persistent"
        pos_hint:{'center_x':0.5,'center_y':0.35}
        size_hint_x:None
        width:270
        required:True


    MDRectangleFlatButton:
        text:'Submit'
        pos_hint:{'center_x':0.5,'center_y':0.25}
        on_release:
            app.log(email.text)
            root.manager.current='otp_signup'
            app.signup_new(firstname.text,lastname.text,password.text,phonenumber.text,aadharnumber.text,email.text)

    MDRectangleFlatButton:
        text:'Have an account? Login'
        pos_hint:{'center_x':0.5,'center_y':0.15}
        on_press: root.manager.current="home"

<OTP_Page>:
    name:'otp_page'


    MDToolbar:
        pos_hint:{'center_x':0.5,'center_y':0.95}
        title:'Enter Your E-mail ID'
        elevation:8

    MDTextField:
        id:otp
        helper_text:'Enter Your E-Mail ID'
        helper_text_mode: "persistent"
        required:True
        pos_hint:{'center_x':0.5,'center_y':0.6}
        size_hint_x:None
        width:270

    MDRectangleFlatButton:
        text:'Next'
        pos_hint:{'center_x':0.5,'center_y':0.5}
        on_release:
            app.log(otp.text)
            root.manager.current='otp_login'



<Home>:
    name:'home'

    MDToolbar:
        pos_hint:{'center_x':0.5,'center_y':0.95}
        title:'PyBank'
        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
        elevation:8

    MDNavigationDrawer:
        id:nav_drawer
        BoxLayout:
            spacing:'8dp'
            padding:'8dp'
            orientation:'vertical'

            Image:
                source:'python_logo.png'

            ScrollView:
                MDList:
                    OneLineIconListItem:
                        text: 'Balance'
                        on_press:
                            app.success_dialog()
                            
                        IconLeftWidget:
                            icon:'cash'



                    OneLineIconListItem:
                        text: 'Transfer'
                        on_press:root.manager.current='transfer_page'
                        IconLeftWidget:
                            icon:'bank-transfer'


                    OneLineIconListItem:
                        text: 'Withdraw'
                        on_press:root.manager.current='withdraw_page'
                        IconLeftWidget:
                            icon:'cash-minus'

                    OneLineIconListItem:
                        text: 'Deposit'
                        on_press:root.manager.current='deposit_page'
                        IconLeftWidget:
                            icon:'cash-plus'

                    OneLineIconListItem:
                        text: 'Logout'
                        on_press:root.manager.current='login_page'
                        IconLeftWidget:
                            icon:'logout'


<Balance>:

    name:'balance_page'

    MDToolbar:
        pos_hint:{'center_x':0.5,'center_y':0.95}
        title:'PyBank'
        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
        elevation:8

    BoxLayout:
        spacing:'8dp'
        padding:'8dp'
        orientation:'vertical'



    MDNavigationDrawer:
        id:nav_drawer
        BoxLayout:
            spacing:'8dp'
            padding:'8dp'
            orientation:'vertical'

            Image:
                source:'python_logo.png'

            ScrollView:
                MDList:
                    OneLineIconListItem:
                        text: 'Balance'
                        on_press:
                            root.manager.current="balance_page"
                            app.success_dialog()
                        IconLeftWidget:
                            icon:'cash'



                    OneLineIconListItem:
                        text: 'Transfer'
                        on_press:root.manager.current='transfer_page'
                        IconLeftWidget:
                            icon:'bank-transfer'


                    OneLineIconListItem:
                        text: 'Withdraw'
                        on_press:root.manager.current='withdraw_page'
                        IconLeftWidget:
                            icon:'cash-minus'

                    OneLineIconListItem:
                        text: 'Deposit'
                        on_press:root.manager.current='deposit_page'
                        IconLeftWidget:
                            icon:'cash-plus'

                    OneLineIconListItem:
                        text: 'Logout'
                        on_press:root.manager.current='login_page'
                        IconLeftWidget:
                            icon:'logout'



<Withdraw>:

    name:'withdraw_page'

    MDToolbar:
        pos_hint:{'center_x':0.5,'center_y':0.95}
        title:'PyBank'
        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
        elevation:8

    BoxLayout:
        spacing:'8dp'
        padding:'8dp'
        orientation:'vertical'



    MDNavigationDrawer:
        id:nav_drawer
        BoxLayout:
            spacing:'8dp'
            padding:'8dp'
            orientation:'vertical'

            Image:
                source:'python_logo.jpg'

            ScrollView:
                MDList:
                    OneLineIconListItem:
                        text: 'Balance'
                        on_press:
                            root.manager.current="balance_page"
                            app.success_dialog()

                        IconLeftWidget:
                            icon:'cash'



                    OneLineIconListItem:
                        text: 'Transfer'
                        on_press:root.manager.current='transfer_page'
                        IconLeftWidget:
                            icon:'bank-transfer'


                    OneLineIconListItem:
                        text: 'Withdraw'
                        on_press:root.manager.current='withdraw_page'
                        IconLeftWidget:
                            icon:'cash-minus'

                    OneLineIconListItem:
                        text: 'Deposit'
                        on_press:root.manager.current='deposit_page'
                        IconLeftWidget:
                            icon:'cash-plus'

                    OneLineIconListItem:
                        text: 'Logout'
                        on_press:root.manager.current='login_page'
                        IconLeftWidget:
                            icon:'logout'


    MDTextField:
        id:login_username
        helper_text:"Enter Account Number"
        helper_text_mode: "persistent"
        required:True
        pos_hint:{'center_x':0.5,'center_y':0.65}
        size_hint_x:None
        icon_right: 'key-variant'
        width:270

    MDTextField:
        id:login_password
        helper_text:'Enter Password'
        helper_text_mode: "persistent"
        required:True
        password: True
        pos_hint:{'center_x':0.5,'center_y':0.55}
        size_hint_x:None
        width:270

    MDIconButton:
        icon: "eye-off"
        ripple_scale: .5
        pos_hint: {"center_y": .55, "center_x":0.65}
        on_release:
            self.icon = "eye" if self.icon == "eye-off" else "eye-off"
            login_password.password = False if login_password.password is True else True

    MDTextField:
        id:login_amount
        helper_text:"Enter Amount"
        helper_text_mode: "persistent"
        required:True
        pos_hint:{'center_x':0.5,'center_y':0.45}
        size_hint_x:None
        width:270
        icon_right: 'cash'


    MDRectangleFlatButton:
        text:'Withdraw'
        pos_hint: {'center_x': 0.5, 'center_y': 0.35}
        on_press:
            app.withdraw(login_username.text, login_password.text, login_amount.text)
            root.manager.current="transaction_success"

<Transfer>:

    name:'transfer_page'

    MDToolbar:
        pos_hint:{'center_x':0.5,'center_y':0.95}
        title:'PyBank'
        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
        elevation:8

    BoxLayout:
        spacing:'8dp'
        padding:'8dp'
        orientation:'vertical'



    MDNavigationDrawer:
        id:nav_drawer
        BoxLayout:
            spacing:'8dp'
            padding:'8dp'
            orientation:'vertical'

            Image:
                source:'python_logo.jpg'

            ScrollView:
                MDList:
                    OneLineIconListItem:
                        text: 'Balance'
                        on_press:
                            root.manager.current="balance_page"
                            app.success_dialog()
                        IconLeftWidget:
                            icon:'cash'



                    OneLineIconListItem:
                        text: 'Transfer'
                        on_press:root.manager.current='transfer_page'
                        IconLeftWidget:
                            icon:'bank-transfer'


                    OneLineIconListItem:
                        text: 'Withdraw'
                        on_press:root.manager.current='withdraw_page'
                        IconLeftWidget:
                            icon:'cash-minus'

                    OneLineIconListItem:
                        text: 'Deposit'
                        on_press:root.manager.current='deposit_page'
                        IconLeftWidget:
                            icon:'cash-plus'

                    OneLineIconListItem:
                        text: 'Logout'
                        on_press:root.manager.current='login_page'
                        IconLeftWidget:
                            icon:'logout'


    MDTextField:
        id:t_login_username
        helper_text:"Enter Transferee Account Number"
        helper_text_mode: "persistent"
        required:True
        pos_hint:{'center_x':0.5,'center_y':0.75}
        size_hint_x:None
        icon_right: 'key-variant'
        width:270

    MDTextField:
        id:login_username
        helper_text:"Enter Your Account Number"
        helper_text_mode: "persistent"
        required:True
        pos_hint:{'center_x':0.5,'center_y':0.65}
        size_hint_x:None
        icon_right: 'key-variant'
        width:270

    MDTextField:
        id:login_password
        helper_text:'Enter Password'
        helper_text_mode: "persistent"
        required:True
        password: True
        pos_hint:{'center_x':0.5,'center_y':0.55}
        size_hint_x:None
        width:270

    MDIconButton:
        icon: "eye-off"
        ripple_scale: .5
        pos_hint: {"center_y": .55, "center_x":0.65}
        on_release:
            self.icon = "eye" if self.icon == "eye-off" else "eye-off"
            login_password.password = False if login_password.password is True else True

    MDTextField:
        id:login_amount
        helper_text:"Enter Amount"
        helper_text_mode: "persistent"
        required:True
        pos_hint:{'center_x':0.5,'center_y':0.45}
        size_hint_x:None
        width:270
        icon_right: 'cash'


    MDRectangleFlatButton:
        text:'Transfer'
        pos_hint: {'center_x': 0.5, 'center_y': 0.35}
        on_press:
            app.transfer(login_username.text, t_login_username.text, login_password.text, login_amount.text)
            root.manager.current="transaction_success"

<Deposit>:

    name:'deposit_page'

    MDToolbar:
        pos_hint:{'center_x':0.5,'center_y':0.95}
        title:'PyBank'
        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
        elevation:8

    BoxLayout:
        spacing:'8dp'
        padding:'8dp'
        orientation:'vertical'



    MDNavigationDrawer:
        id:nav_drawer
        BoxLayout:
            spacing:'8dp'
            padding:'8dp'
            orientation:'vertical'

            Image:
                source:'python_logo.jpg'

            ScrollView:
                MDList:
                    OneLineIconListItem:
                        text: 'Balance'
                        on_press:
                            root.manager.current="balance_page"
                            app.success_dialog()
                        IconLeftWidget:
                            icon:'cash'



                    OneLineIconListItem:
                        text: 'Transfer'
                        on_press:root.manager.current='transfer_page'
                        IconLeftWidget:
                            icon:'bank-transfer'


                    OneLineIconListItem:
                        text: 'Withdraw'
                        on_press:root.manager.current='withdraw_page'
                        IconLeftWidget:
                            icon:'cash-minus'

                    OneLineIconListItem:
                        text: 'Deposit'
                        on_press:root.manager.current='deposit_page'
                        IconLeftWidget:
                            icon:'cash-plus'

                    OneLineIconListItem:
                        text: 'Logout'
                        on_press:root.manager.current='login_page'
                        IconLeftWidget:
                            icon:'logout'

    MDTextField:
        id:login_username
        helper_text:"Enter Account Number"
        helper_text_mode: "persistent"
        required:True
        pos_hint:{'center_x':0.5,'center_y':0.65}
        size_hint_x:None
        icon_right: 'key-variant'
        width:270

    MDTextField:
        id:login_password
        helper_text:'Enter Password'
        helper_text_mode: "persistent"
        required:True
        password: True
        pos_hint:{'center_x':0.5,'center_y':0.55}
        size_hint_x:None
        width:270

    MDIconButton:
        icon: "eye-off"
        ripple_scale: .5
        pos_hint: {"center_y": .55, "center_x":0.65}
        on_release:
            self.icon = "eye" if self.icon == "eye-off" else "eye-off"
            login_password.password = False if login_password.password is True else True

    MDTextField:
        id:login_amount
        helper_text:"Enter Amount"
        helper_text_mode: "persistent"
        required:True
        pos_hint:{'center_x':0.5,'center_y':0.45}
        size_hint_x:None
        width:270
        icon_right: 'cash'


    MDRectangleFlatButton:
        text:'Deposit'
        pos_hint: {'center_x': 0.5, 'center_y': 0.35}
        on_press:
            app.deposit(login_username.text, login_password.text, login_amount.text)
            root.manager.current="transaction_success"

<OTP_Login>:
    name:'otp_login'

    MDToolbar:
        pos_hint:{'center_x':0.5,'center_y':0.95}
        title:'Enter OTP'
        elevation:8

    MDTextField:
        id:otp
        helper_text:'Enter OTP sent to E-Mail'
        helper_text_mode: "persistent"
        required:True
        password: True
        pos_hint:{'center_x':0.5,'center_y':0.6}
        size_hint_x:None
        width:270

    MDRectangleFlatButton:
        text:'Verify'
        pos_hint:{'center_x':0.5,'center_y':0.5}
        on_release:
            check=app.chec(otp.text)
            root.manager.current="home" if check == True else "otp_login"

<Transaction_Success>:
    name:'transaction_success'

    MDToolbar:
        pos_hint:{'center_x':0.5,'center_y':0.95}
        title:'Transaction Successful!'
        elevation:8

    MDLabel:
        text:"Transaction Successful"
        pos_hint:{'center_x':0.6,'center_y':0.8}
        font_size:30
        size_hint_x:None
        width:500

    MDRectangleFlatButton:
        text:'OK'
        pos_hint:{'center_x':0.5,'center_y':0.7}
        on_press:
            root.manager.current: "home"


<OTP_Transfer>:
    name:'otp_transfer'

    MDToolbar:
        pos_hint:{'center_x':0.5,'center_y':0.95}
        title:'Enter OTP'
        elevation:8

    MDTextField:
        id:otp
        helper_text:'Enter OTP sent to E-Mail'
        helper_text_mode: "persistent"
        required:True
        password: True
        pos_hint:{'center_x':0.5,'center_y':0.6}
        size_hint_x:None
        width:270

    MDRectangleFlatButton:
        text:'Verify'
        pos_hint:{'center_x':0.5,'center_y':0.5}
        on_release:
            check=app.chec(otp.text)
            root.manager.current="transaction_success" if check == True else "otp_transfer"


<OTP_Withdraw>:
    name:'otp_withdraw'

    MDToolbar:
        pos_hint:{'center_x':0.5,'center_y':0.95}
        title:'Enter OTP'
        elevation:8

    MDTextField:
        id:otp
        helper_text:'Enter OTP sent to E-Mail'
        helper_text_mode: "persistent"
        required:True
        password: True
        pos_hint:{'center_x':0.5,'center_y':0.6}
        size_hint_x:None
        width:270

    MDRectangleFlatButton:
        text:'Verify'
        pos_hint:{'center_x':0.5,'center_y':0.5}
        on_release:
            check=app.chec(otp.text)
            root.manager.current="transaction_success" if check == True else "otp_withdraw"


<OTP_Signup>:
    name:'otp_signup'

    MDToolbar:
        pos_hint:{'center_x':0.5,'center_y':0.95}
        title:'Enter OTP'
        elevation:8

    MDTextField:
        id:otp
        helper_text:'Enter OTP sent to E-Mail'
        helper_text_mode: "persistent"
        required:True
        password: True
        pos_hint:{'center_x':0.5,'center_y':0.6}
        size_hint_x:None
        width:270

    MDRectangleFlatButton:
        text:'Verify'
        pos_hint:{'center_x':0.5,'center_y':0.5}
        on_release:
            check=app.chec(otp.text)
            root.manager.current="home" if check == True else "otp_signup"


<OTP_Deposit>:
    name:'otp_deposit'

    MDToolbar:
        pos_hint:{'center_x':0.5,'center_y':0.95}
        title:'Enter OTP'
        elevation:8

    MDTextField:
        id:otp
        helper_text:'Enter OTP sent to E-Mail'
        helper_text_mode: "persistent"
        required:True
        password: True
        pos_hint:{'center_x':0.5,'center_y':0.6}
        size_hint_x:None
        width:270

    MDRectangleFlatButton:
        text:'Verify'
        pos_hint:{'center_x':0.5,'center_y':0.5}
        on_release:
            check=app.chec(otp.text)
            root.manager.current="transaction_success" if check == True else "otp_deposit"


